{% load mptt_tags %}
{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="{% static 'objectify/styles.css' %}" />
    <script src="{% static 'objectify/interact.js' %}"></script>
    <script>
        interact('.draggable')
            .draggable({
                inertia: true,
                restrict: {
                    restriction: "parent",
                    endOnly: true,
                },
                onmove: dragMoveListener,
        });
        function dragMoveListener (event) {
        var target = event.target,
            // keep the dragged position in the data-x/data-y attributes
            x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
            y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

        // translate the element
        target.style.webkitTransform =
        target.style.transform =
          'translate(' + x + 'px, ' + y + 'px)';

        // update the posiion attributes
        target.setAttribute('data-x', x);
        target.setAttribute('data-y', y);
        }

    // this is used later in the resizing demo
    window.dragMoveListener = dragMoveListener;

    </script>
    <title>SVG STUFF</title>
</head>
<body>
{% recursetree nodes %}
    <div class="draggable">
        {% if node.shape == 'O' %}
            <div class="ellipse" id="{{ node.human_readable_name }}">
        {% elif node.shape == 'L' %}
            <div class="rect" id="{{ node.human_readable_name }}">
        {% endif %}
        {% if not node.is_leaf_node %}
            {{ children }}
        {% endif %}
            </div>
    </div>
{% endrecursetree %}
</body>
</html>